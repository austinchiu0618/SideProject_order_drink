import{_ as w,E as x,r as D,a as p,o as y,M as k,c as l,b as e,t as u,F as m,d as v,w as h,v as M,e as N,f as n,g,h as C,i as S}from"./index-zwRDnCU8.js";const T={name:"OptionWindow",props:{sentData:{type:Object,dafult:{}},idx:{type:Number,dafult:1}},setup(d,{emit:t}){let _=D({productName:"",whatCup:"",whatTemp:"",whatSugar:"",totalPrice:0,orderNum:1}),s=D({myModal:{}}),b=p(!1),o=p(""),a=p([{name:"大杯",value:"large"},{name:"中杯",value:"medium"}]),r=p([{name:"正常冰",value:"iceFull"},{name:"少冰",value:"iceFew"},{name:"微冰",value:"iceLittle"},{name:"去冰",value:"iceNone"},{name:"常溫",value:"nomralTemp"},{name:"熱",value:"hotTemp"}]),i=p([{name:"正常糖",value:"sugarFull"},{name:"少糖",value:"sugarFew"},{name:"半糖",value:"sugarHalf"},{name:"微糖",value:"sugarLittle"},{name:"無糖",value:"sugarNone"}]);return y(()=>{let c=document.getElementById(`optionModal${d.idx}`);s.myModal=new k(c),c.addEventListener("hidden.bs.modal",function(f){t("update")})}),{orderDesc:_,ctrlModal:s,notDecide:b,decideWhat:o,cup_size:a,cup_temp:r,cup_sugar:i}},computed:{totalMoney(){return this.orderDesc.whatCup==="medium"?this.sentData.price_medium*this.orderDesc.orderNum:this.sentData.price_large*this.orderDesc.orderNum}},methods:{numMinus(){return this.orderDesc.orderNum==1?"":this.orderDesc.orderNum--},numPlus(){return this.orderDesc.orderNum++},addOrderList(){if(this.orderDesc.whatCup==""||this.orderDesc.whatTemp==""||this.orderDesc.whatSugar==""){this.notDecide=!0,this.decideWhat="",this.orderDesc.whatCup==""&&(this.decideWhat+="杯型 "),this.orderDesc.whatTemp==""&&(this.decideWhat+="溫度 "),this.orderDesc.whatSugar==""&&(this.decideWhat+="糖度 ");return}else this.notDecide=!1,this.cup_size.forEach(d=>{this.orderDesc.whatCup===d.value&&(this.orderDesc.whatCup=d.name)}),this.cup_temp.forEach(d=>{this.orderDesc.whatTemp===d.value&&(this.orderDesc.whatTemp=d.name)}),this.cup_sugar.forEach(d=>{this.orderDesc.whatSugar===d.value&&(this.orderDesc.whatSugar=d.name)}),this.orderDesc.productName=this.sentData.productName,this.orderDesc.totalPrice=this.totalMoney,this.$store.commit("addOrderCar",this.orderDesc),this.ctrlModal.myModal.hide(),x({message:"已加入購物車",type:"success"})}}},P={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-sm"},B={class:"modal-content"},L={class:"modal-header"},W={class:"modal-title fs-4",id:"exampleModalLabel"},O={class:"modal-body"},E={class:"py-2"},U=["id","value"],F=["for"],z={class:"py-2"},I={class:"d-flex flex-wrap"},V=["id","value"],H=["for"],j={class:"py-2"},R={class:"d-flex flex-wrap"},q=["id","value"],A=["for"],G={class:"my-2"},J={class:"modal-footer"},K={class:"input-group"};function Q(d,t,_,s,b,o){return n(),l("div",P,[e("div",B,[e("div",L,[e("h5",W,u(_.sentData.productName),1),t[7]||(t[7]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",O,[e("div",E,[t[8]||(t[8]=e("p",null,[e("span",{class:"text-danger"},"✽"),e("span",null,"杯型")],-1)),e("div",null,[(n(!0),l(m,null,v(s.cup_size,(a,r)=>(n(),l("span",{key:r,class:"m-1"},[h(e("input",{type:"radio",class:"btn-check",id:`largeSize${r}`,value:a.value,name:"cupSize","onUpdate:modelValue":t[0]||(t[0]=i=>s.orderDesc.whatCup=i)},null,8,U),[[g,s.orderDesc.whatCup]]),e("label",{class:"btn btn-outline-warning text-dark optionBtn optionBtn",for:`largeSize${r}`},u(a.name),9,F)]))),128))])]),e("div",z,[t[9]||(t[9]=e("p",null,[e("span",{class:"text-danger"},"✽"),e("span",null,"溫度")],-1)),e("div",I,[(n(!0),l(m,null,v(s.cup_temp,(a,r)=>(n(),l("span",{key:r,class:"m-1"},[h(e("input",{type:"radio",class:"btn-check",id:a.value,value:a.value,"onUpdate:modelValue":t[1]||(t[1]=i=>s.orderDesc.whatTemp=i),name:"temperature"},null,8,V),[[g,s.orderDesc.whatTemp]]),e("label",{class:"btn btn-outline-warning text-dark optionBtn",for:a.value},u(a.name),9,H)]))),128))])]),e("div",j,[t[10]||(t[10]=e("p",null,[e("span",{class:"text-danger"},"✽"),e("span",null,"糖度")],-1)),e("div",R,[(n(!0),l(m,null,v(s.cup_sugar,(a,r)=>(n(),l("span",{key:r,class:"m-1"},[h(e("input",{type:"radio",class:"btn-check",id:a.value,value:a.value,"onUpdate:modelValue":t[2]||(t[2]=i=>s.orderDesc.whatSugar=i),name:"sugarHowMany"},null,8,q),[[g,s.orderDesc.whatSugar]]),e("label",{class:"btn btn-outline-warning text-dark optionBtn",for:a.value},u(a.name),9,A)]))),128))])]),e("div",G,[h(e("p",{class:"text-danger"},"請選擇 "+u(s.decideWhat),513),[[M,s.notDecide]])])]),e("div",J,[e("div",null,[e("div",K,[e("button",{class:"btn btn-outline-secondary",onClick:t[3]||(t[3]=(...a)=>o.numMinus&&o.numMinus(...a))}," - "),h(e("input",{type:"text",class:"form-control text-align border-secondary",style:{width:"45px"},"onUpdate:modelValue":t[4]||(t[4]=a=>s.orderDesc.orderNum=a)},null,512),[[N,s.orderDesc.orderNum]]),e("button",{class:"btn btn-outline-secondary",onClick:t[5]||(t[5]=(...a)=>o.numPlus&&o.numPlus(...a))}," + ")])]),e("div",null,"總金額："+u(o.totalMoney)+" 元",1),t[11]||(t[11]=e("div",null,null,-1)),e("button",{id:"checkBtn",type:"button",class:"btn btn-dark text-white",onClick:t[6]||(t[6]=(...a)=>o.addOrderList&&o.addOrderList(...a))}," 加入購物車 ")])])])}const X=w(T,[["render",Q],["__scopeId","data-v-f43f8eae"]]),Y={components:{OptionWindow:X},setup(){const d=D({drinkProduct:{}}),t=D({index:1});return{axiosData:d,idx:t}},computed:{productData(){return this.$store.state.productData}},methods:{getProductId(d){this.axiosData.drinkProduct=d},onUpdate(){this.idx.index+=1}},mounted(){this.$store.dispatch("getData")}},Z={id:"productList"},$={class:"drinkDesc"},ee={class:"drinkType"},te=["data-bs-target","onClick"],ae={class:"drinkName"},se={class:"drinkPrice"},de=["id"];function oe(d,t,_,s,b,o){const a=S("OptionWindow");return n(),l(m,null,[e("div",Z,[(n(!0),l(m,null,v(o.productData,(r,i)=>(n(),l("div",{key:i,class:"drinkMenu"},[e("div",$,[e("div",ee,u(r.name),1),(n(!0),l(m,null,v(r.drinkList,c=>(n(),l("div",{class:"drinkTitle",key:c.id,"data-bs-toggle":"modal","data-bs-target":`#optionModal${s.idx.index}`,onClick:f=>o.getProductId(c)},[e("span",ae,u(c.productName),1),e("span",se,u(c.price_large),1)],8,te))),128))])]))),128))]),e("div",{class:"modal fade",id:`optionModal${s.idx.index}`,tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false"},[(n(),C(a,{sentData:s.axiosData.drinkProduct,key:s.idx.index,idx:s.idx.index,onUpdate:o.onUpdate},null,8,["sentData","idx","onUpdate"]))],8,de)],64)}const re=w(Y,[["render",oe],["__scopeId","data-v-e3b0dbb8"]]);export{re as default};
