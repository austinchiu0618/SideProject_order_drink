import{_ as T,c as i,b as e,j as d,w as l,g as f,k as w,e as h,t as a,F as I,d as O,l as p,m as y,i as b,n as g,E as B,p as v,u as j,r as x,f as u}from"./index-zwRDnCU8.js";const S={computed:{orderData(){return this.$store.state.userOrder},amount(){let s=0;return this.orderData.forEach(t=>{s=s+t.totalPrice}),s}},setup(){const s=j(),t=v(()=>s.state.orderInfo),m=v(()=>s.state.userOrder),n=x({howToGet:t.value.howToGet,contact_name:t.value.contact_name,contact_phone:t.value.contact_phone,howToPay:t.value.howToPay,orderList:m.value}),c=x({isCheckOrder:!1,isTextError:!1});return{orderInfo:n,judgment:c}},methods:{onChange(){this.$store.commit("tempOrderCar",this.orderInfo),this.verifyStep()},onFocusOut(s){var t=new RegExp(/^[0-9]{10}$/g);if(t.test(s))this.judgment.isTextError=!1,this.verifyStep();else{this.judgment.isCheckOrder=!1,this.judgment.isTextError=!0;return}},deleteList(s){g.confirm("確認是否刪除品項",{confirmButtonText:"刪除",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.commit("deleteOrderCar",s)}).catch(()=>{})},checkOrder(){g.confirm("確認是否送出訂單",{confirmButtonText:"確認",cancelButtonText:"取消",type:"info"}).then(()=>{this.$store.commit("cleanOrderCar"),this.$store.commit("cleanOrderInfo"),this.orderInfo.howToGet="",this.orderInfo.contact_name="",this.orderInfo.contact_phone=null,this.orderInfo.howToPay="",this.orderInfo.orderList=[],this.judgment.isCheckOrder=!1,B({message:"已送出訂單",type:"success"})}).catch(()=>{})},verifyStep(){this.orderData.length!==0&&(this.judgment.isCheckOrder=!0,Object.values(this.orderInfo).forEach(s=>{s||(this.judgment.isCheckOrder=!1)}))}},mounted(){this.verifyStep()}},E={id:"orderList"},P={id:"orderDesc"},V={class:"py-3"},N={class:"my-1"},D={class:"m-2"},G={class:"m-2"},L={class:"py-3 border-top"},F={key:0,class:"textError"},U={class:"py-2 border-top"},M={class:"my-1"},R={class:"py-3 border-top"},z={class:"fs-4"},q={class:"fs-6"},A={class:"px-2 my-1"},H={class:"fs-5"},J=["onClick"],K={class:"py-3 border-top d-flex justify-content-between align-items-sm-center"},Q={class:"m-1"},W={class:"m-1"},X=["disabled"];function Y(s,t,m,n,c,r){const C=b("el-button"),k=b("router-link");return u(),i("div",E,[e("div",P,[t[23]||(t[23]=e("div",{class:"fs-3"},"訂購資訊",-1)),e("div",V,[t[12]||(t[12]=e("div",{class:"fs-4"},[e("span",{class:"text-danger"},"✽"),d(" 取餐方式")],-1)),e("div",N,[e("span",D,[l(e("input",{type:"radio",id:"bySelf",class:"btn-check",name:"getStyle",value:"自取","onUpdate:modelValue":t[0]||(t[0]=o=>n.orderInfo.howToGet=o),onChange:t[1]||(t[1]=(...o)=>r.onChange&&r.onChange(...o))},null,544),[[f,n.orderInfo.howToGet]]),t[10]||(t[10]=e("label",{class:"btn btn-outline-warning text-dark optionBtn optionBtn",for:"bySelf"},"自取 ",-1))]),e("span",G,[l(e("input",{type:"radio",id:"byShop",class:"btn-check",name:"getStyle",value:"外送","onUpdate:modelValue":t[2]||(t[2]=o=>n.orderInfo.howToGet=o),onChange:t[3]||(t[3]=(...o)=>r.onChange&&r.onChange(...o))},null,544),[[f,n.orderInfo.howToGet]]),t[11]||(t[11]=e("label",{class:"btn btn-outline-warning text-dark optionBtn optionBtn",for:"byShop"},"外送 ",-1))])])]),e("div",L,[t[13]||(t[13]=e("div",{class:"fs-4"},[e("span",{class:"text-danger"},"✽"),d(" 聯絡人資訊")],-1)),t[14]||(t[14]=e("label",{class:"fs-5 my-1",for:"buyerName"},"姓名",-1)),l(e("input",{class:"form-control form-control-sm optionText my-1",type:"text",id:"buyerName","onUpdate:modelValue":t[4]||(t[4]=o=>n.orderInfo.contact_name=o)},null,512),[[h,n.orderInfo.contact_name]]),t[15]||(t[15]=e("label",{class:"fs-5 my-1",for:"buyerPhone"},"手機電話",-1)),l(e("input",{class:"form-control form-control-sm optionText my-1",type:"text",id:"buyerPhone","onUpdate:modelValue":t[5]||(t[5]=o=>n.orderInfo.contact_phone=o),onFocusout:t[6]||(t[6]=o=>r.onFocusOut(n.orderInfo.contact_phone))},null,544),[[h,n.orderInfo.contact_phone]]),n.judgment.isTextError?(u(),i("p",F,"號碼輸入錯誤")):w("",!0)]),e("div",U,[t[17]||(t[17]=e("div",{class:"fs-4"},[e("span",{class:"text-danger"},"✽"),d(" 結帳方式")],-1)),e("div",M,[l(e("input",{type:"radio",id:"byCash",class:"btn-check",value:"現金","onUpdate:modelValue":t[7]||(t[7]=o=>n.orderInfo.howToPay=o),onChange:t[8]||(t[8]=(...o)=>r.onChange&&r.onChange(...o))},null,544),[[f,n.orderInfo.howToPay]]),t[16]||(t[16]=e("label",{class:"btn btn-outline-warning text-dark optionBtn optionBtn",for:"byCash"},"現金 ",-1))])]),e("div",R,[e("div",z,[t[18]||(t[18]=d(" 訂購明細 ")),e("span",q,"總金額:"+a(r.amount)+"元",1)]),(u(!0),i(I,null,O(r.orderData,(o,_)=>(u(),i("div",{class:"d-flex justify-content-start align-items-sm-center",key:o.id},[e("div",A,[e("span",H,a(o.productName),1),t[19]||(t[19]=e("span",null,null,-1)),t[20]||(t[20]=e("br",null,null,-1)),e("span",null,a(o.whatCup)+" / "+a(o.whatTemp)+" / "+a(o.whatSugar)+" / $"+a(o.totalPrice)+" / "+a(o.orderNum)+"杯",1)]),e("div",{class:"ps-4",onClick:Z=>r.deleteList(_)},[p(C,{size:"small",round:"",plain:""},{default:y(()=>t[21]||(t[21]=[d("刪除")])),_:1,__:[21]})],8,J)]))),128))]),e("div",K,[e("span",Q,[p(k,{to:"/"},{default:y(()=>t[22]||(t[22]=[e("button",{class:"btn btn-outline-dark optionBtn2"}," 繼續加購 ",-1)])),_:1,__:[22]})]),e("span",W,[e("button",{onClick:t[9]||(t[9]=(...o)=>r.checkOrder&&r.checkOrder(...o)),disabled:!n.judgment.isCheckOrder,class:"btn btn-dark optionBtn2"},"結帳",8,X)])])])])}const tt=T(S,[["render",Y],["__scopeId","data-v-0882973a"]]);export{tt as default};
